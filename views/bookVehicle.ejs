<%- include('partials/header') %>
<% var inventory1=[]; %>


  <div class="jumbotron centered">
    <div class="container">
      <i class="fas fa-key fa-6x"></i>
      <h1 class="display-3">Book your vehicle</h1>
      <hr>
      <br>
      <br>
      
      <div class="row">
      <div class="col-sm-8">
        <div class="card">
          <div class="card-body">

            <form>
              <div class="form-group">
                <label for="station">Station</label>
                <select id="station" name="station" class="form-control">
                  <% for(let i=0; i<stations.length; i++) { %>
                    <option value="<%= stations[i]._id %>">
                      <%= stations[i].location %>
                    </option>
                    <% } %>
                </select>
              </div>
              <button onclick="getVehicle()" class="btn btn-dark">Book </button>
              </form>

          </div>
        </div>
      </div>
      </div>
        <%
	    function getVehicle() {
		var selectElement = document.querySelector('#station');
		var output = selectElement.value;
        inventory1 = inventory.filter((f)=>{ return f.station._id === output});
        console.log(inventory1);
	    }
        %>

      <h2 class="display-3">Available Vehicles</h2>
      <br>
      <br>

      <table class="table" id="showVehicle">
        <thead class="thead-dark">
          <tr>
            <th scope="col">Sl No.</th>
            <th scope="col">Vehicle Type</th>
            <th scope="col">License</th>
            <th scope="col">Model</th>
            <th scope="col">QR code</th>
          </tr>
        </thead>
        <% for(let i=0; i<inventory1.length; i++) { %>
          <tr>
            <th scope="row">
              <%=i+1%>
            </th>
            <td>
              <%= inventory1[i].vehicle.make %>
            </td>
            <td>
              <%= inventory1[i].vehicle.licensePlate %>
            </td>
            <td>
              <%= inventory1[i].vehicle.model %>
            </td>
            <td>
              <%= inventory1[i].vehicle.qrCode %>
            </td>
          </tr>
          <% } %>
            <tbody>
            </tbody>
      </table>
    </div>
  </div>

      <div class="row">
          <div class="col-sm-8">
            <div class="card">
              <div class="card-body">

              <form action="/vehicle/book" method="POST">
                          <div class="form-group">
                            <label for="QR CODE">QR CODE</label>
                            <input type="text" class="form-control" name="QR_code">
                            </div>
                          <button type="submit" class="btn btn-dark">Book </button>
               </form>
                    </div>
                </div>
          </div>
      </div>
      </div>
  </div>

	<%- include('partials/footer') %>
